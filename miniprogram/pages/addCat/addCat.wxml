<view class="head1">
  <text user-select="true">名字</text>
</view>
<input data-key='name' bindinput="inputText" class="edit-input" value="{{cat.name}}" />

<view class="head1">
  <text user-select="true">昵称</text>
</view>
<input data-key='nickName' bindinput="inputText" class="edit-input" value="{{cat.nickName}}" />

<!-- 头像上传区域 -->
<view class="head1">
  <text user-select="true">头像</text>
</view>
<view class="image-upload-container">
  <view class="avatar-preview" bindtap="chooseAvatar">
    <image wx:if="{{avatarUrl}}" class="avatar-image" src="{{avatarUrl}}" mode="aspectFill"></image>
    <view wx:else class="avatar-placeholder">
      <text>点击上传头像</text>
    </view>
  </view>
</view>

<view class="head1">
  <text user-select="true">外貌</text>
</view>
<input data-key='appearance' bindinput="inputText" class="edit-input" value="{{cat.appearance}}" />

<view class="head1">
  <text user-select="true">毛色分类</text>
</view>
<picker mode="selector" data-key='classification' bindchange="bindPickerChange" range="{{pickers.classification}}" value='{{picker_selected.classification}}'>
  <view class="edit-input">
    {{cat.classification}}
  </view>
</picker>

<view class="head1">
  <text user-select="true">毛色</text>
</view>
<input data-key='furColor' bindinput="inputText" class="edit-input" value="{{cat.furColor}}" />

<view class="head1">
  <text user-select="true">性别</text>
</view>
<picker mode="selector" data-key='gender' bindchange="bindPickerChange" range="{{pickers.gender}}" value='{{picker_selected.gender}}'>
  <view class="edit-input">
    {{cat.gender}}
  </view>
</picker>

<view class="head1">
  <text user-select="true">是否寻找领养</text>
</view>
<picker mode="selector" data-key='isAdoption' bindchange="bindPickerChange" range="{{pickers.isAdoption}}" value='{{picker_selected.isAdoption}}'>
  <view class="edit-input">
    {{cat.isAdoption}}
  </view>
</picker>

<!-- 图片上传区域 -->
<view class="head1">
  <text user-select="true">图片</text>
</view>
<view class="image-upload-section">
  <view class="image-grid">
    <view wx:for="{{imageList}}" wx:key="index" class="image-item">
      <image class="uploaded-image" src="{{item.url}}" mode="aspectFill" bindtap="previewImage" data-index="{{index}}"></image>
      <view class="image-actions">
        <view class="set-cover-btn" bindtap="setCoverImage" data-index="{{index}}">
          <text wx:if="{{item.isCover}}">首图</text>
          <text wx:else>设为首图</text>
        </view>
        <view class="remove-image-btn" bindtap="removeImage" data-index="{{index}}">删除</view>
      </view>
    </view>
    <view wx:if="{{imageList.length < 5}}" class="upload-button" bindtap="chooseImage">
      <text>+</text>
    </view>
  </view>
  <view class="upload-hint">最多可上传5张图片，首图将作为猫咪的主要展示图片</view>
</view>

<!-- 视频上传区域 -->
<view class="head1">
  <text user-select="true">视频</text>
</view>
<view class="video-upload-section">
  <view class="video-grid">
    <view wx:for="{{videoList}}" wx:key="index" class="video-item">
      <video class="uploaded-video" src="{{item.url}}" controls></video>
      <view class="remove-video-btn" bindtap="removeVideo" data-index="{{index}}">删除</view>
    </view>
    <view wx:if="{{videoList.length < 2}}" class="upload-button" bindtap="chooseVideo">
      <text>+</text>
    </view>
  </view>
  <view class="upload-hint">最多可上传2个视频</view>
</view>

<!-- 音频上传区域 -->
<view class="head1">
  <text user-select="true">音频</text>
</view>
<view class="audio-upload-section">
  <view class="audio-list">
    <view wx:for="{{audioList}}" wx:key="index" class="audio-item">
      <view class="audio-info">
        <text>音频{{index + 1}}</text>
      </view>
      <view class="remove-audio-btn" bindtap="removeAudio" data-index="{{index}}">删除</view>
    </view>
    <view wx:if="{{audioList.length < 3}}" class="upload-button" bindtap="chooseAudio">
      <text>+</text>
    </view>
  </view>
  <view class="upload-hint">最多可上传3个音频文件</view>
</view>

<view class="head1">
  <text user-select="true">状况</text>
</view>
<picker mode="selector" data-key='status' bindchange="bindPickerChange" range="{{pickers.status}}">
  <view class="edit-input">
    {{cat.status}}
  </view>
</picker>

<view class="head1">
  <text user-select="true">绝育情况</text>
</view>
<picker mode="selector" data-key='isSterilization' bindchange="bindPickerChange" range="{{pickers.isSterilization}}" value='{{picker_selected.isSterilization}}'>
  <view class="edit-input">
    {{cat.isSterilization}}
  </view>
</picker>

<view class="head1">
  <text user-select="true">绝育时间</text>
</view>
<input data-key='sterilizationTime' bindinput="inputText" class="edit-input" value="{{cat.sterilizationTime}}" />

<view class="head1">
  <text user-select="true">疫苗情况</text>
</view>
<picker mode="selector" data-key='vaccine' bindchange="bindPickerChange" range="{{pickers.vaccine}}" value='{{picker_selected.vaccine}}'>
  <view class="edit-input">
    {{cat.vaccine}}
  </view>
</picker>

<view class="head1">
  <text user-select="true">出没地点</text>
</view>
<input data-key='location' bindinput="inputText" class="edit-input" value="{{cat.location}}" />

<view class="head1">
  <text user-select="true">出生时间</text>
</view>
<input data-key='birthTime' bindinput="inputText" class="edit-input" value="{{cat.birthTime}}" />

<view class="head1">
  <text user-select="true">性格</text>
</view>
<picker mode="selector" data-key='character' bindchange="bindPickerChange" range="{{pickers.character}}" value='{{picker_selected.character}}'>
  <view class="edit-input">
    {{cat.character}}
  </view>
</picker>

<view class="head1">
  <text user-select="true">第一次目击时间</text>
</view>
<input data-key='firstSightingTime' bindinput="inputText" class="edit-input" value="{{cat.firstSightingTime}}" />

<view class="head1">
  <text user-select="true">失踪时间</text>
</view>
<input data-key='missingTime' bindinput="inputText" class="edit-input" value="{{cat.missingTime}}" />

<view class="head1">
  <text user-select="true">送养时间</text>
</view>
<picker mode="date" fields="month" data-key='deliveryTime' bindchange="bindDateChange" value='{{cat.deliveryTime}}'>
  <view class="edit-input">
    {{cat.deliveryTime}}
  </view>
</picker>

<view class="head1">
  <text user-select="true">离世时间</text>
</view>
<picker mode="date" fields="month" data-key='deathTime' bindchange="bindDateChange" value='{{cat.deathTime}}'>
  <view class="edit-input">
    {{cat.deathTime}}
  </view>
</picker>

<view class="head1">
  <text user-select="true">离世原因</text>
</view>
<input data-key='deathReason' bindinput="inputText" class="edit-input" value="{{cat.deathReason}}" />

<view class="head1">
  <text user-select="true">更多</text>
</view>
<input data-key='moreInformation' bindinput="inputText" class="edit-input" value="{{cat.moreInformation}}" />

<view class="head1">
  <text user-select="true">备注</text>
</view>
<input data-key='notes' bindinput="inputText" class="edit-input" value="{{cat.notes}}" />

<view class="head1">
  <text user-select="true">关系</text>
</view>
<input data-key='relationship' bindinput="inputText" class="edit-input" value="{{cat.relationship}}" />

<view class="head1">
  <text user-select="true">相关的猫，用一个空格隔开</text>
</view>
<input data-key='relatedCats' bindinput="inputText" class="edit-input" value="{{cat.relatedCats}}" />

<text> \n </text>

<button class='primary' bindtap='upload' style="margin: 0;">确定提交</button>

<text> \n </text>

<!-- 隐藏的画布用于图片处理 -->
<canvas class="hidden-canvas" canvas-id="compressCanvas" style="width: 0; height: 0;"></canvas>
<canvas class="hidden-canvas" canvas-id="avatarCanvas" style="width: 0; height: 0;"></canvas>